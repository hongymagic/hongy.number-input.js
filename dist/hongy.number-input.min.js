angular.module("hongy",[]).directive("input",["numberFilter","$timeout",function(n,e){function r(e){return function(r){return console.log(r,e),n(r,e)}}function u(n){var e;return"string"!=typeof n&&"number"!=typeof n?null:(e=Math.round("number"==typeof n?n:parseFloat((n||"").replace(",",""))),isFinite(e)?e:null)}function o(n,e,r,u){return n.$setValidity(e,r),u}function t(n,e){return function(r){return o(n,"min",r>=e,r)}}function i(n,e){return function(r){return o(n,"max",e>=r,r)}}var a=".hongy.number",l=["focus"+a].join(" "),s=["blur"+a].join(" "),c="$destroy";return{restrict:"E",require:["?ngModel"],scope:{min:"&min",max:"&max",precision:"&precision"},link:function(n,o,a,f){if(f&&"number"in a){var m,p=n.precision()||0,$=r(p),d=u;m=f[0],m.$parsers.push(u),m.$formatters.push($),a.min&&m.$parsers.push(t(m,parseFloat(a.min))),a.max&&m.$parsers.push(i(m,parseFloat(a.max))),o.on(l,function(){return m.$viewValue=d(m.$modelValue),m.$render(),e(function(){o.select()},0)}).on(s,function(){return m.$viewValue=$(m.$modelValue),m.$modelValue=d(m.$modelValue),m.$render()}).on(c,function(){o.off(l).off(s)})}}}}]);